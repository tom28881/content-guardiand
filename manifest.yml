app:
  runtime:
    name: nodejs20.x
  id: ari:cloud:ecosystem::app/4ba6b0ec-dfa0-44b2-bcdd-719e3c965ccf

permissions:
  scopes:
    - storage:app
    - read:confluence-content.all
    - read:confluence-content.summary
    - read:confluence-space.summary
    - write:confluence-content
    # Granular scopes required for Confluence Cloud REST API v2
    - read:page:confluence
    - read:space:confluence
    - read:confluence-user

modules:
  confluence:globalPage:
    - key: content-guardian-global
      title: Content Guardian
      route: content-guardian
      render: native
      resource: main
      resolver:
        function: resolver
  function:
    - key: resolver
      handler: backend/index.handler
    - key: scheduled-scan
      handler: backend/index.scan
  scheduledTrigger:
    - key: daily-scan
      function: scheduled-scan
      interval: day

resources:
  - key: main
    path: src/frontend/index.jsx
